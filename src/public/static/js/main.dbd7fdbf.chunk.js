(this["webpackJsonplogin-screen"]=this["webpackJsonplogin-screen"]||[]).push([[2],{110:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(33),u=n.n(c),o=(n(83),n(128)),s=n(74),S=n(127),i=n(21),E=n(11),_=n(3),l=n(44),p=n(10),O=function(e){var t=e.component,n=e.redirectTo,a=Object(l.a)(e,["component","redirectTo"]),r=Object(i.c)((function(e){return e.user.user})),c=Object(i.c)((function(e){return e.user.loading}));if(!t)throw Error("component is undefined");var u=t;return Object(p.jsx)(E.b,Object(_.a)(Object(_.a)({},a),{},{render:function(e){return(null===r||void 0===r?void 0:r.displayName)&&(null===r||void 0===r?void 0:r.id)&&!c?Object(p.jsx)(E.a,{to:{pathname:n}}):Object(p.jsx)(u,Object(_.a)({},e))}}))},T=function(e){var t=e.component,n=Object(l.a)(e,["component"]),a=Object(i.c)((function(e){return e.user.user})),r=Object(i.c)((function(e){return e.user.loading}));if(!t)throw Error("component is undefined");var c=t;return Object(p.jsx)(E.b,Object(_.a)(Object(_.a)({},n),{},{render:function(e){return(null===a||void 0===a?void 0:a.displayName)&&(null===a||void 0===a?void 0:a.id)&&!r?Object(p.jsx)(c,Object(_.a)({},e)):Object(p.jsx)(E.a,{to:{pathname:"/signin"}})}}))},b=n(126),d=n(130),R=Object(d.a)((function(){return Object(b.a)({"@global":{"*":{boxSizing:"border-box",margin:0,padding:0},html:{"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",height:"100%",width:"100%"},body:{backgroundColor:"whitesmoke",height:"100%",width:"100%"},a:{textDecoration:"none"},"#root":{height:"100%",width:"100%"}}})})),A=function(){return R(),null},f=n(14),j=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(6)]).then(n.bind(null,362))})),N=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(7)]).then(n.bind(null,365))})),I=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(5),n.e(8)]).then(n.bind(null,360))})),h=function(){var e=Object(i.b)(),t=Object(s.a)({});return Object(a.useEffect)((function(){e(Object(f.b)())}),[e]),Object(p.jsx)("div",{children:Object(p.jsxs)(S.a,{theme:t,children:[Object(p.jsx)(A,{}),Object(p.jsx)(E.d,{children:Object(p.jsxs)(a.Suspense,{fallback:Object(p.jsx)(o.a,{}),children:[Object(p.jsx)(O,{exact:!0,path:"/",component:j,redirectTo:"/chat-app"}),Object(p.jsx)(O,{exact:!0,path:"/signin",component:j,redirectTo:"/chat-app"}),Object(p.jsx)(O,{exact:!0,path:"/signup",component:N,redirectTo:"/chat-app"}),Object(p.jsx)(T,{exact:!0,path:"/chat-app",component:I})]})})]})})},L=function(e){e&&e instanceof Function&&n.e(9).then(n.bind(null,359)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,u=t.getTTFB;n(e),a(e),r(e),c(e),u(e)}))},C=n(27),x=n(59);u.a.render(Object(p.jsx)(i.a,{store:x.a,children:Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(C.a,{children:Object(p.jsx)(h,{})})})}),document.getElementById("root")),L()},14:function(e,t,n){"use strict";n.d(t,"i",(function(){return r})),n.d(t,"j",(function(){return c})),n.d(t,"h",(function(){return u})),n.d(t,"l",(function(){return o})),n.d(t,"m",(function(){return s})),n.d(t,"k",(function(){return S})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return E})),n.d(t,"a",(function(){return _})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return p})),n.d(t,"e",(function(){return O})),n.d(t,"d",(function(){return T}));var a=n(8),r=function(e){return{type:a.a.SIGN_IN_START,payload:e}},c=function(e){return{type:a.a.SIGN_IN_SUCCESS,payload:e}},u=function(e){return{type:a.a.SIGN_IN_FAILURE,payload:e}},o=function(){return{type:a.a.SIGN_OUT_START}},s=function(){return{type:a.a.SIGN_OUT_SUCCESS}},S=function(e){return{type:a.a.SIGN_OUT_FAILURE,payload:e}},i=function(){return{type:a.a.CURRENT_USER_SESSION_START}},E=function(e){return{type:a.a.CURRENT_USER_SESSION_SUCCESS,payload:e}},_=function(){return{type:a.a.CURRENT_USER_SESSION_FAILURE}},l=function(e){return{type:a.a.REGISTRATION_START,payload:e}},p=function(e){return{type:a.a.REGISTRATION_SUCCESS,payload:e}},O=function(e){return{type:a.a.REGISTRATION_FAILURE,payload:e}},T=function(){return{type:a.a.RESET_ERRORS}}},35:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"h",(function(){return c})),n.d(t,"j",(function(){return u})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return S})),n.d(t,"i",(function(){return i})),n.d(t,"a",(function(){return E})),n.d(t,"k",(function(){return _})),n.d(t,"c",(function(){return l})),n.d(t,"g",(function(){return p}));var a=n(9),r=function(e){return{type:a.a.SET_LOCAL_STREAM,payload:e}},c=function(e){return{type:a.a.SET_REMOTE_STREAM,payload:e}},u=function(e){return{type:a.a.SET_SCREENSHARING_STREAM,payload:e}},o=function(e){return{type:a.a.SET_CALL_STATE,payload:e}},s=function(e){return{type:a.a.SET_CAMERA_ENABLED,payload:e}},S=function(e){return{type:a.a.SET_MICROPHONE_ENABLED,payload:e}},i=function(e){return{type:a.a.SET_SCREENSHARING_ENABLED,payload:e}},E=function(){return{type:a.a.RESET_CALL_STATE}},_=function(e){return{type:a.a.SHOW_CALL_DIALOG,payload:e}},l=function(e){return{type:a.a.SET_NAME_OF_CALLER,payload:e}},p=function(e){return{type:a.a.NEW_TEXT_MESSAGE,payload:e}}},43:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.SET_ACTIVE_USERS="SET_ACTIVE_USERS",e.SET_AVAILABLE_USERS="SET_AVAILABLE_USERS",e.SET_BUSY_USERS="SET_BUSY_USERS"}(a||(a={}))},59:function(e,t,n){"use strict";var a=n(25),r=n(5),c=n.n(r),u=n(7),o=n(35),s=n(14),S=n(8),i=n(28),E=n(32),_=n.n(E),l="https://juptr-mart112.herokuapp.com";function p(e){return O.apply(this,arguments)}function O(){return(O=Object(i.a)(c.a.mark((function e(t){var n,a,r,u,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_()({url:"".concat(l,"/v1/auth/signin"),method:"POST",data:t,withCredentials:!0});case 3:return n=e.sent,a=n.data,r=a.id,u=a.displayName,o=a.email,s=a.fullName,e.abrupt("return",{id:r,displayName:u,email:o,fullName:s});case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function T(){return b.apply(this,arguments)}function b(){return(b=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_()({url:"".concat(l,"/v1/auth/signout"),method:"POST",withCredentials:!0});case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function d(){return R.apply(this,arguments)}function R(){return(R=Object(i.a)(c.a.mark((function e(){var t,n,a,r,u,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_()({url:"".concat(l,"/v1/auth/currentuser"),method:"GET",withCredentials:!0});case 3:return t=e.sent,n=t.data.currentUser,a=n.id,r=n.displayName,u=n.email,o=n.fullName,e.abrupt("return",{id:a,displayName:r,email:u,fullName:o});case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function A(e){return f.apply(this,arguments)}function f(){return(f=Object(i.a)(c.a.mark((function e(t){var n,a,r,u,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_()({url:"".concat(l,"/v1/auth/signup"),method:"POST",data:t,withCredentials:!0});case 3:return n=e.sent,a=n.data,r=a.id,u=a.displayName,o=a.email,s=a.fullName,e.abrupt("return",{id:r,displayName:u,email:o,fullName:s});case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var j=c.a.mark(v),N=c.a.mark(m),I=c.a.mark(g),h=c.a.mark(G),L=c.a.mark(w),C=c.a.mark(M),x=c.a.mark(k),y=c.a.mark(B),U=c.a.mark(F);function v(){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(u.b)(d);case 3:if(e=t.sent){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,Object(u.c)(Object(s.c)(e));case 8:t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(0),t.next=14,Object(u.c)(Object(s.a)());case 14:case"end":return t.stop()}}),j,null,[[0,10]])}function m(e){var t,n,a;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.type,t=e.payload,r.prev=1,r.next=4,Object(u.b)(p,t);case 4:if(n=r.sent){r.next=7;break}return r.abrupt("return");case 7:return r.next=9,Object(u.c)(Object(s.j)(n));case 9:r.next=21;break;case 11:if(r.prev=11,r.t0=r.catch(1),!r.t0.response){r.next=19;break}return a=r.t0.response.data.errors,r.next=17,Object(u.c)(Object(s.h)(a));case 17:r.next=21;break;case 19:return r.next=21,Object(u.c)(Object(s.h)([{msg:"Login Service Unavailable"}]));case 21:case"end":return r.stop()}}),N,null,[[1,11]])}function g(e){var t,n,a;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.type,t=e.payload,r.prev=1,r.next=4,Object(u.b)(A,t);case 4:if(n=r.sent){r.next=7;break}return r.abrupt("return");case 7:return r.next=9,Object(u.c)(Object(s.g)(n));case 9:r.next=21;break;case 11:if(r.prev=11,r.t0=r.catch(1),!r.t0.response){r.next=19;break}return a=r.t0.response.data.errors,r.next=17,Object(u.c)(Object(s.e)(a));case 17:r.next=21;break;case 19:return r.next=21,Object(u.c)(Object(s.e)([{msg:"Registration Service Unavailable",param:"offline"}]));case 21:case"end":return r.stop()}}),I,null,[[1,11]])}function G(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.b)(T);case 3:return e.next=5,Object(u.c)(Object(s.m)());case 5:return e.next=7,Object(u.c)(Object(o.a)());case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(0),e.next=13,Object(u.c)(Object(s.k)([{msg:"Failed to signout."}]));case 13:case"end":return e.stop()}}),h,null,[[0,9]])}function w(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.d)(S.a.REGISTRATION_START,g);case 2:case"end":return e.stop()}}),L)}function M(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.d)(S.a.SIGN_IN_START,m);case 2:case"end":return e.stop()}}),C)}function k(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.d)(S.a.SIGN_OUT_START,G);case 2:case"end":return e.stop()}}),x)}function B(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.d)(S.a.CURRENT_USER_SESSION_START,v);case 2:case"end":return e.stop()}}),y)}function F(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.a)([Object(u.b)(M),Object(u.b)(w),Object(u.b)(k),Object(u.b)(B)]);case 2:case"end":return e.stop()}}),U)}var D=n(9),H=c.a.mark(W),P=c.a.mark(X),V=c.a.mark(z);function W(e){var t;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.type,e.payload,n.prev=1,n.next=4,Object(u.b)(d);case 4:if(t=n.sent){n.next=7;break}return n.abrupt("return");case 7:return n.next=9,Object(u.c)(Object(s.c)(t));case 9:n.next=17;break;case 11:return n.prev=11,n.t0=n.catch(1),n.next=15,Object(u.c)(Object(o.a)());case 15:return n.next=17,Object(u.c)(Object(s.a)());case 17:case"end":return n.stop()}}),H,null,[[1,11]])}function X(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.d)(D.a.SET_CALL_STATE,W);case 2:case"end":return e.stop()}}),P)}function z(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.a)([Object(u.b)(X)]);case 2:case"end":return e.stop()}}),V)}var Y=c.a.mark(J);function J(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.a)([F(),z()]);case 2:case"end":return e.stop()}}),Y)}var Q=n(3),q={user:null,loading:!1,errorMessage:[]},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.a.CURRENT_USER_SESSION_START:return Object(Q.a)(Object(Q.a)({},e),{},{loading:!0});case S.a.CURRENT_USER_SESSION_SUCCESS:return Object(Q.a)(Object(Q.a)({},e),{},{loading:!1,user:t.payload});case S.a.RESET_ERRORS:return Object(Q.a)(Object(Q.a)({},e),{},{errorMessage:[]});case S.a.SIGN_IN_SUCCESS:return Object(Q.a)(Object(Q.a)({},e),{},{user:t.payload,loading:!1,errorMessage:[]});case S.a.SIGN_IN_START:return Object(Q.a)(Object(Q.a)({},e),{},{loading:!0});case S.a.SIGN_OUT_SUCCESS:return{user:null,loading:!1,errorMessage:[]};case S.a.REGISTRATION_START:return Object(Q.a)(Object(Q.a)({},e),{},{loading:!0});case S.a.REGISTRATION_SUCCESS:return Object(Q.a)(Object(Q.a)({},e),{},{loading:!1,errorMessage:[],user:t.payload});case S.a.CURRENT_USER_SESSION_FAILURE:return Object(Q.a)(Object(Q.a)({},e),{},{loading:!1,user:null,errorMessage:[]});case S.a.SIGN_IN_FAILURE:case S.a.SIGN_OUT_FAILURE:case S.a.REGISTRATION_FAILURE:return Object(Q.a)(Object(Q.a)({},e),{},{loading:!1,errorMessage:t.payload?t.payload:[]});default:return e}},Z=n(75),$={callState:D.b.CALL_AVAILABLE,localStream:null,remoteStream:null,screenSharingStream:null,isScreenSharing:!1,isCameraEnabled:!0,isMicrophoneEnabled:!0,name:"",showCallDialog:{show:!1},lastTextMessage:void 0,textMessages:[]},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D.a.SET_LAST_TEXT_MESSAGE:return Object(Q.a)(Object(Q.a)({},e),{},{lastTextMessage:t.payload});case D.a.NEW_TEXT_MESSAGE:return Object(Q.a)(Object(Q.a)({},e),{},{textMessages:[].concat(Object(Z.a)(e.textMessages),[t.payload])});case D.a.SET_LOCAL_STREAM:return Object(Q.a)(Object(Q.a)({},e),{},{localStream:t.payload});case D.a.SET_REMOTE_STREAM:return Object(Q.a)(Object(Q.a)({},e),{},{remoteStream:t.payload});case D.a.SET_SCREENSHARING_STREAM:return Object(Q.a)(Object(Q.a)({},e),{},{screenSharingStream:t.payload});case D.a.SET_CALL_STATE:return Object(Q.a)(Object(Q.a)({},e),{},{callState:t.payload});case D.a.SET_CAMERA_ENABLED:return Object(Q.a)(Object(Q.a)({},e),{},{isCameraEnabled:t.payload});case D.a.SET_MICROPHONE_ENABLED:return Object(Q.a)(Object(Q.a)({},e),{},{isMicrophoneEnabled:t.payload});case D.a.SET_SCREENSHARING_ENABLED:return Object(Q.a)(Object(Q.a)({},e),{},{isScreenSharing:t.payload});case D.a.SET_NAME_OF_CALLER:return Object(Q.a)(Object(Q.a)({},e),{},{name:t.payload});case D.a.SHOW_CALL_DIALOG:return Object(Q.a)(Object(Q.a)({},e),{},{showCallDialog:t.payload});case D.a.RESET_CALL_STATE:return Object(Q.a)(Object(Q.a)({},e),{},{callState:D.b.CALL_AVAILABLE,remoteStream:null,screenSharingStream:null,isScreenSharing:!1,isCameraEnabled:!0,isMicrophoneEnabled:!0,name:"",showCallDialog:{show:!1},lastTextMessage:void 0,textMessages:[]});default:return e}},te=n(43),ne={activeUsers:[],availableUsers:[],busyUsers:[]},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te.a.SET_ACTIVE_USERS:return Object(Q.a)(Object(Q.a)({},e),{},{activeUsers:t.payload});case te.a.SET_AVAILABLE_USERS:return Object(Q.a)(Object(Q.a)({},e),{},{availableUsers:t.payload});case te.a.SET_BUSY_USERS:return Object(Q.a)(Object(Q.a)({},e),{},{busyUsers:t.payload});default:return e}},re=Object(a.b)({user:K,chat:ae,call:ee}),ce=n(76),ue=(n(109),Object(ce.a)()),oe=[ue];var se=Object(a.d)(re,a.a.apply(void 0,oe));ue.run(J);t.a=se},8:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.SIGN_IN_START="SIGN_IN_START",e.SIGN_IN_SUCCESS="SIGN_IN_SUCCESS",e.SIGN_IN_FAILURE="SIGN_IN_FAILURE",e.SIGN_OUT_START="SIGN_OUT_START",e.SIGN_OUT_SUCCESS="SIGN_OUT_SUCCESS",e.SIGN_OUT_FAILURE="SIGN_OUT_FAILURE",e.REGISTRATION_START="REGISTRATION_START",e.REGISTRATION_SUCCESS="REGISTRATION_SUCCESS",e.REGISTRATION_FAILURE="REGISTRATION_FAILURE",e.CURRENT_USER_SESSION_START="CURRENT_USER_SESSION_START",e.CURRENT_USER_SESSION_SUCCESS="CURRENT_USER_SESSION_SUCCESS",e.CURRENT_USER_SESSION_FAILURE="CURRENT_USER_SESSION_FAILURE",e.RESET_ERRORS="RESET_ERRORS"}(a||(a={}))},83:function(e,t,n){},9:function(e,t,n){"use strict";var a,r;n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r})),function(e){e.CALL_UNAVAILABLE="CALL_UNAVAILABLE",e.CALL_AVAILABLE="CALL_AVAILABLE",e.CALL_REQUESTED="CALL_REQUESTED",e.CALL_IN_PROGRESS="CALL_IN_PROGRESS"}(a||(a={})),function(e){e.SET_LOCAL_STREAM="SET_LOCAL_STREAM",e.SET_REMOTE_STREAM="SET_REMOTE_STREAM",e.SET_SCREENSHARING_STREAM="SET_SCREENSHARING_STREAM",e.SET_CALL_STATE="SET_CALL_STATE",e.SET_CAMERA_ENABLED="SET_CAMERA_ENABLED",e.SET_MICROPHONE_ENABLED="SET_MICROPHONE_ENABLED",e.SET_SCREENSHARING_ENABLED="SET_SCREENSHARING_ENABLED",e.SET_NAME_OF_CALLER="SET_NAME_OF_CALLER",e.RESET_CALL_STATE="RESET_CALL_STATE",e.SHOW_CALL_DIALOG="SHOW_CALL_DIALOG",e.SET_LAST_TEXT_MESSAGE="SET_LAST_TEXT_MESSAGE",e.NEW_TEXT_MESSAGE="NEW_TEXT_MESSAGE"}(r||(r={}))}},[[110,3,4]]]);
//# sourceMappingURL=main.dbd7fdbf.chunk.js.map